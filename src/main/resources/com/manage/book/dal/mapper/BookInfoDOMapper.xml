<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.manage.book.dal.daointerface.BookInfoDOMapper">
  <resultMap id="BaseResultMap" type="com.manage.book.dal.dataobject.BookInfoDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <constructor>
      <idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="isbn" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="owner_id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="borrower_id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="book_status" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="author" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="book_type" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="publishers" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="pic" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="brief" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="book_comment" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="deposit" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="cost" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="gmt_modified" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="gmt_create" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="book_titile" javaType="java.lang.String" jdbcType="VARCHAR" />
    </constructor>
  </resultMap>

  <resultMap id="BaseResultMapSearch" type="com.manage.book.dal.dataobject.BookInfoDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <result column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <result column="author" javaType="java.lang.String" jdbcType="VARCHAR" />
      <result column="book_titile" javaType="java.lang.String" jdbcType="VARCHAR" />
  </resultMap>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from book_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.manage.book.dal.dataobject.BookInfoDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into book_info (isbn, owner_id, borrower_id, 
      book_status, author, book_type, 
      publishers, pic, brief, 
      book_comment, deposit, cost, 
      gmt_modified, gmt_create, book_titile
      )
    values (#{isbn,jdbcType=VARCHAR}, #{ownerId,jdbcType=INTEGER}, #{borrowerId,jdbcType=INTEGER}, 
      #{bookStatus,jdbcType=INTEGER}, #{author,jdbcType=VARCHAR}, #{bookType,jdbcType=VARCHAR}, 
      #{publishers,jdbcType=VARCHAR}, #{pic,jdbcType=VARCHAR}, #{brief,jdbcType=VARCHAR}, 
      #{bookComment,jdbcType=VARCHAR}, #{deposit,jdbcType=INTEGER}, #{cost,jdbcType=INTEGER}, 
      #{gmtModified,jdbcType=TIMESTAMP}, #{gmtCreate,jdbcType=TIMESTAMP}, #{bookTitile,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.manage.book.dal.dataobject.BookInfoDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_info
    set isbn = #{isbn,jdbcType=VARCHAR},
      owner_id = #{ownerId,jdbcType=INTEGER},
      borrower_id = #{borrowerId,jdbcType=INTEGER},
      book_status = #{bookStatus,jdbcType=INTEGER},
      author = #{author,jdbcType=VARCHAR},
      book_type = #{bookType,jdbcType=VARCHAR},
      publishers = #{publishers,jdbcType=VARCHAR},
      pic = #{pic,jdbcType=VARCHAR},
      brief = #{brief,jdbcType=VARCHAR},
      book_comment = #{bookComment,jdbcType=VARCHAR},
      deposit = #{deposit,jdbcType=INTEGER},
      cost = #{cost,jdbcType=INTEGER},
      gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      book_titile = #{bookTitile,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, isbn, owner_id, borrower_id, book_status, author, book_type, publishers, 
    pic, brief, book_comment, deposit, cost, gmt_modified, gmt_create, book_titile
    from book_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, isbn, owner_id, borrower_id, book_status, author, book_type, publishers, 
    pic, brief, book_comment, deposit, cost, gmt_modified, gmt_create, book_titile
    from book_info
  </select>

  <select id="selectByKey" resultMap="BaseResultMapSearch" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, pic, book_titile
    from book_info
    <if test="key !=null ">
      where
       book_titile  like CONCAT('%', #{key,jdbcType=VARCHAR},'%')
        or author  like CONCAT('%', #{key,jdbcType=VARCHAR},'%')
        or isbn   like CONCAT('%', #{key,jdbcType=VARCHAR},'%')
    </if>
    order by gmt_create desc
    limit #{start,jdbcType=INTEGER},#{end,jdbcType=INTEGER}
  </select>
</mapper>